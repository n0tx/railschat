<div class="h-screen flex">
  <!-- Sidebar peserta -->
  <aside class="w-64 bg-white p-4 border-r">
    <h2>Participants</h2>
    <ul>
      <% @room.messages.map(&:user).uniq.each do |u| %>
        <li><%= u.name %></li>
      <% end %>
    </ul>
  </aside>

  <!-- Area chat -->
  <div class="flex-1 flex flex-col">
    <!-- Header room -->
    <header class="p-4 border-b flex justify-between">
      <h1><%= @room.name %></h1>
      <%= link_to "Back", dashboard_path, class: "text-blue-600 hover:underline" %>
    </header>

    <!-- Container pesan dengan Stimulus -->
    <div
      id="messages"
      data-controller="reset"
      data-reset-target="messages"
      class="flex-1 overflow-y-auto p-4 space-y-4 bg-white"
    >
      <%= turbo_stream_from @room %>
      <%= render @messages %>
    </div>

    <!-- Form kirim pesan -->
    <div class="p-4 border-t bg-white">
      <%= turbo_frame_tag "new_message" do %>
        <%= form_with model: [@room, @message],
                      local: true,
                      data: { controller: "reset", action: "turbo:submit-end->reset#clear" } do |f| %>

          <!-- Hidden field untuk room_id -->
          <%= f.hidden_field :room_id, value: @room.id %>

          <div class="flex space-x-2">
            <%= f.text_field :content,
                  placeholder: "Type your message...",
                  data: { reset_target: "content" },
                  class: "flex-1 border rounded-lg px-4 py-2 focus:outline-none focus:ring" %>
            <%= f.submit "Send",
                  class: "px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>